name: Python CI with Retry

on:
  push:
    branches:
      - main

jobs:
  setup-python-with-retry:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout Code
      uses: actions/checkout@v3

    - name: Retry Setup Python
      run: |
        # Retry logic with 3 attempts
        for i in {1..3}; do
          echo "Attempt $i to setup Python"
          if python -m pip install --upgrade pip; then
            echo "Python setup succeeded!"
            break
          elif [ $i -eq 3 ]; then
            echo "Python setup failed after $i attempts. Exiting."
            exit 1
          fi
          sleep 5
        done
